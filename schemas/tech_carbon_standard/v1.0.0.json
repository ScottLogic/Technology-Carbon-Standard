{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://techcarbonstandard.org/schemas/tech_carbon_standard/v1.0.0.json",
  "title": "Technology Carbon Standard",
  "description": "The Technology Carbon Standard is a standard for measuring and managing the carbon emissions of technology products and services.",
  "type": "object",

  "properties": {
    "standard_version": {
      "type": "string",
      "enum": ["1.0.0", "latest"],
      "description": "Version of the Technology Carbon Standard"
    },
    "organisations": {
      "type": "array",
      "description": "List each reporting organisation and it's carbon emissions data.",
      "items": {
        "type": "object",
        "properties": {
          "organisation_name": {
            "type": "string",
            "description": "Name of the reporting organisation"
          },
          "description": {
            "type": "string",
            "description": "Description of the reporting organisation"
          },
          "open_corporates_url": {
            "type": "string",
            "description": "Open Corporates URL for the reporting organisation"
          },
          "registered_country": {
            "type": "string",
            "description": "Country of registration of the reporting organisation"
          },
          "emissions_reports": {
            "type": "array",
            "description": "List of TCS emissions reports over time. Each report can use a different schema version.",
            "items": {
              "type": "object",
              "properties": {
                "schema_version": {
                  "type": "string",
                  "description": "Version of the emissions report schema used for this report.",
                  "enum": ["latest", "0.0.1"]
                },
                "report_data": {
                  "type": "object",
                  "description": "The emissions report data validated against the specified schema version."
                }
              },
              "required": [
                "schema_version",
                "report_data"
              ],
              "additionalProperties": false,
              "allOf": [
                {
                  "if": {
                    "properties": {
                      "schema_version": { "const": "latest" }
                    }
                  },
                  "then": {
                    "properties": {
                      "report_data": {
                        "$ref": "https://techcarbonstandard.org/schemas/emissions_report/latest.json"
                      }
                    }
                  }
                },
                {
                  "if": {
                    "properties": {
                      "schema_version": { "const": "0.0.1" }
                    }
                  },
                  "then": {
                    "properties": {
                      "report_data": {
                        "$ref": "https://techcarbonstandard.org/schemas/emissions_report/v0.0.1.json"
                      }
                    }
                  }
                }
              ]
            }
          }
        },
        "required": [
          "organisation_name",
          "emissions_reports"
        ],
        "additionalProperties": false
      }
    }
  },
  "required": [
    "standard_version",
    "organisations"
  ],
  "additionalProperties": false
}
